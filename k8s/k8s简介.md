#### K8s

k8s是一个编排容器的工具，其实也是管理应用的全生命周期的一个工具，从创建应用，应用的部署，应用提供服务，扩容缩容应用，应用更新，都非常的方便，而且可以做到故障自愈，例如一个服务器挂了，可以自动将这个服务器上的服务调度到另外一个主机上进行运行，无需进行人工干涉。

<hr/>

#### 优点

  k8s可以更快的更新新版本，打包应用，更新的时候可以做到不用中断服务，服务器故障不用停机，从开发环境到测试环境到生产环境的迁移极其方便，一个配置文件搞定，一次生成image，到处运行。。。

<hr/>

#### k8s集群

> +  **使用集群，create cluster是为了掩盖底层的无能，在各种环境中，底层的硬件各不相同，有的是各种低廉的服务器，有的各种云环境，有的是各种vm，有的各种host machine，要想屏蔽底层的细节，增强可靠性和稳定性，从而需要创建集群。**

> + 创建集群的好处就是，统一对外提供接口，无须进行各种复杂的调用；提供更好的可靠性，服务器宕机那么频繁，物理磁盘那么容易损坏，无须担心，集群统一进行调配；提供更好的性能，组合集群中各个机器的计算存储网络资源，提供更好的TPS和PS；提供横向扩容的能力，在进行横向扩容的时候，性能基本上能呈线性增长。

> +  集群看起来很牛，那么创建起来很复杂么？并不会，在k8s只要使用两条指令就可以创建一个集群，一个是kubectl init进行初始化，创建一个master节点，第二条指令就是kubectl join xxx创建一个node节点，加入这个集群。

> + **划分了两种类型的主机，一个master节点，主要用来调度，控制集群的资源等功能；而node节点，主要是用来运行容器的节点，也就是运行服务的节点。**

> +  其实集群都差不多，master用来控制，用来存储各种元数据，node节点是一个工作节点，真正来干活的；node节点定时与master进行通信，通过kubelet进程来汇报信息。

> + **一条指令就能运行一个服务，有了image之后就是这么简单。所以，在开发完成程序之后，需要将程序打包成image，然后放到registry中，然后就能够运行应用了。**

> + **在k8s里面，集群调度的最小单元就是一个pod，一个pod可以是一个容器，也可以是多个容器，例如你运行一个程序，其中使用了nginx，使用mysql了，使用了jetty，那么可以将这三个使用在同一个pod中，对他们提供统一的调配能力，一个pod只能运行在一个主机上，而一个主机上可以有多个pod。**

<hr/>

#### 扩容缩容

+ **横向扩展的能力。每次扩容缩容的时候，这种会不会觉得很方便，一句话的事儿。不用创建vm，不用去部署中间件，不用去各种修改配置，这就是自动化。**


#### 更新

+ **滚动更新。根据新的image创建一个pod，分配各种资源，然后自动负载均衡，删除老的pod，然后继续更新。不会中断服务。**

+ **更新错了怎么办，不会影响生产业务，有回滚操作**